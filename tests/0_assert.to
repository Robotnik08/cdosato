define void assert (var value, var expected) {
    do {
        do if (value != expected) then {
            do sayln(`Assertion failed
Expected: {expected}
Got: {value}`
            )
            do end(1)
        }
    } catch {
        do sayln(`Assertion failed
Expected: {expected}
Got: {value}
With error code: {_}`
        )
        do end(_)
    }
}

define void expectError (var func, int code) {
    do func() then {
        do sayln(`Expected error code {code}, it passed`)
        do end(1)
    } catch {
        do if (_ != code) then {
            do sayln(`Expected error code {code}, got {_}`)
            do end(_)
        }
    }
}